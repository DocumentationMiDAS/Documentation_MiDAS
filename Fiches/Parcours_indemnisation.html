<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Le parcours de l’indemnisation – Documentation MiDAS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-4e06652229b68a313dbee95ce7d2703d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Documentation MiDAS</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../Presentation/présentation.html"> 
<span class="menu-text">MiDAS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../FHS/FHS_presentation.html"> 
<span class="menu-text">FHS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../FNA/FNA_presentation.html"> 
<span class="menu-text">FNA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Allstat_FR6/Allstat_FR6_presentation.html"> 
<span class="menu-text">Allstat-FR6</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../MMO/mmo_presentation.html"> 
<span class="menu-text">MMO</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../Fiches/Fiches_presentation.html" aria-current="page"> 
<span class="menu-text">Fiches</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../BTS/BTS_presentation.html"> 
<span class="menu-text">BTS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Codes/codes_presentation.html"> 
<span class="menu-text">Codes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Fiches/Parcours_indemnisation.html">Le parcours de l’indemnisation</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Fiches/Fiches_presentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fiches thématiques</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Fiches/Maintien_de_droits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Maintien de droits</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Fiches/Allocations_regimes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Allocations agrégées et régimes d’indemnisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Fiches/Parcours_indemnisation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Le parcours de l’indemnisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Fiches/Differe_indemnisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Différé d’indemnisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Fiches/Activité réduite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Activité réduite</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#inscription-et-indemnisation" id="toc-inscription-et-indemnisation" class="nav-link active" data-scroll-target="#inscription-et-indemnisation">Inscription et indemnisation</a></li>
  <li><a href="#dépôt-dune-demande-dallocation" id="toc-dépôt-dune-demande-dallocation" class="nav-link" data-scroll-target="#dépôt-dune-demande-dallocation">Dépôt d’une demande d’allocation</a></li>
  <li><a href="#ouverture-de-droit" id="toc-ouverture-de-droit" class="nav-link" data-scroll-target="#ouverture-de-droit">Ouverture de droit 🟢</a></li>
  <li><a href="#fait-générateur" id="toc-fait-générateur" class="nav-link" data-scroll-target="#fait-générateur">Fait générateur</a></li>
  <li><a href="#durée-potentielle-dindemnisation" id="toc-durée-potentielle-dindemnisation" class="nav-link" data-scroll-target="#durée-potentielle-dindemnisation">Durée potentielle d’indemnisation 🟢</a></li>
  <li><a href="#ensemble-des-indemnisables" id="toc-ensemble-des-indemnisables" class="nav-link" data-scroll-target="#ensemble-des-indemnisables">Ensemble des indemnisables 🔵</a>
  <ul class="collapse">
  <li><a href="#en-fin-de-mois" id="toc-en-fin-de-mois" class="nav-link" data-scroll-target="#en-fin-de-mois">En fin de mois 🔵</a></li>
  <li><a href="#tout-le-mois" id="toc-tout-le-mois" class="nav-link" data-scroll-target="#tout-le-mois">Tout le mois</a></li>
  <li><a href="#au-cours-du-mois" id="toc-au-cours-du-mois" class="nav-link" data-scroll-target="#au-cours-du-mois">Au cours du mois</a></li>
  <li><a href="#cas-de-lactivité-réduite" id="toc-cas-de-lactivité-réduite" class="nav-link" data-scroll-target="#cas-de-lactivité-réduite">Cas de l’activité réduite</a></li>
  </ul></li>
  <li><a href="#ensemble-des-indemnisés" id="toc-ensemble-des-indemnisés" class="nav-link" data-scroll-target="#ensemble-des-indemnisés">Ensemble des indemnisés 🔵</a>
  <ul class="collapse">
  <li><a href="#en-fin-de-mois-1" id="toc-en-fin-de-mois-1" class="nav-link" data-scroll-target="#en-fin-de-mois-1">En fin de mois 🔵</a></li>
  <li><a href="#tout-le-mois-1" id="toc-tout-le-mois-1" class="nav-link" data-scroll-target="#tout-le-mois-1">Tout le mois</a></li>
  <li><a href="#au-cours-du-mois-1" id="toc-au-cours-du-mois-1" class="nav-link" data-scroll-target="#au-cours-du-mois-1">Au cours du mois</a></li>
  </ul></li>
  <li><a href="#distinction-par-régime" id="toc-distinction-par-régime" class="nav-link" data-scroll-target="#distinction-par-régime">Distinction par régime 🔵</a>
  <ul class="collapse">
  <li><a href="#régimes-particuliers" id="toc-régimes-particuliers" class="nav-link" data-scroll-target="#régimes-particuliers">Régimes particuliers</a></li>
  </ul></li>
  <li><a href="#consommation-de-droit" id="toc-consommation-de-droit" class="nav-link" data-scroll-target="#consommation-de-droit">Consommation de droit 🟢</a></li>
  <li><a href="#reprises-de-droit" id="toc-reprises-de-droit" class="nav-link" data-scroll-target="#reprises-de-droit">Reprises de droit 🟢</a>
  <ul class="collapse">
  <li><a href="#droit-doption" id="toc-droit-doption" class="nav-link" data-scroll-target="#droit-doption">Droit d’option</a></li>
  </ul></li>
  <li><a href="#fins-de-droit" id="toc-fins-de-droit" class="nav-link" data-scroll-target="#fins-de-droit">Fins de droit 🟢</a>
  <ul class="collapse">
  <li><a href="#suivies-dun-rechargement" id="toc-suivies-dun-rechargement" class="nav-link" data-scroll-target="#suivies-dun-rechargement">Suivies d’un rechargement 🟢</a></li>
  </ul></li>
  <li><a href="#glossaire-de-lindemnisation" id="toc-glossaire-de-lindemnisation" class="nav-link" data-scroll-target="#glossaire-de-lindemnisation">Glossaire de l’indemnisation</a></li>
  <li><a href="#cibles" id="toc-cibles" class="nav-link" data-scroll-target="#cibles">Cibles</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Le parcours de l’indemnisation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="inscription-et-indemnisation" class="level1">
<h1>Inscription et indemnisation</h1>
<p>Cette fiche présente les principaux concepts de l’indemnisation, la manière dont ils apparaissent dans les données de l’indemnisation de MiDAS : le Fichier National des Allocataires (FNA) transmis par France Travail, et la méthodologie pour reproduire les indicateurs statistiques usuels associés.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Programmation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les programmes fournis sont des programmes R rédigés en syntaxe <code>tidyverse</code>. Les packages du <code>tidyverse</code> sont donc nécessaires, en particulier le package <code>dplyr</code> pour assurer le fonctionnement des programmes. 🔧</p>
<p>Néanmoins, cette condition n’est pas suffisante. Les données MiDAS exhaustives sont volumineuses et peuvent nécessiter des ressources informatiques importantes pour effectuer le calcul des indicateurs évoqués ici. 💻</p>
</div>
</div>
<p><strong>Le parcours de l’indemnisation</strong></p>
<p><img src="../images/parcours_indemnisation_schema.png" class="img-fluid"></p>
<p>Trois dénominations sont utilisées au cours de cet article :</p>
<ul>
<li><p>un <strong>demandeur d’emploi</strong> est une personne inscrite à France Travail, déclarant être en recherche d’un emploi ;</p></li>
<li><p>un <strong>allocataire de l’Assurance-chômage</strong>, ou personne prise en charge par l’Assurance-chômage, ou demandeur d’emploi indemnisable est un demandeur d’emploi qui a une demande d’allocation acceptée par France Travail ;</p></li>
<li><p>un <strong>allocataire indemnisé</strong> est un allocataire qui perçoit une allocation.</p></li>
</ul>
</section>
<section id="dépôt-dune-demande-dallocation" class="level1">
<h1>Dépôt d’une demande d’allocation</h1>
<p>Suite à la perte involontaire d’un contrat de travail, l’inscription à France Travail donne lieu à un accompagnement au retour à l’emploi. Une fois inscrit, le demandeur d’emploi peut déposer une demande d’allocation.</p>
<p>L’ensemble des demandes d’allocation sont renseignées dans le segment <strong>DAL</strong> du Fichier National des Allocataires (FNA) de MiDAS. La décision de France Travail à une demande d’allocation peut être :</p>
<ul>
<li><p>positive avec <strong>ouverture d’un nouveau droit</strong> : si le demandeur d’emploi remplit la condition d’ouverture de droit, le motif de décision lié à la DAL est alors ouverture de droit (<code>KCNDDA = 1</code>)</p></li>
<li><p>positive avec <strong>reprise d’un droit déjà ouvert précédemment</strong> : un droit reste valable pendant toute la durée du délai de déchéance (voir section dédiée dans cet article)</p></li>
<li><p>positive avec <strong>rechargement des droit</strong> (voir section dédiée dans cet article)</p></li>
<li><p><strong>négative</strong> ou sans objet</p></li>
</ul>
<p>Si la décision liée à la demande d’allocation est positive, le demandeur d’emploi <strong>entre à l’Assurance chômage</strong> et devient allocataire de l’Assurance-chômage, ou encore indemnisable à l’Assurance chômage. Cette entrée à l’Assurance-chômage est appelée ouverture de droit ou reprise de droit pour les allocataires qui avaient déjà ouvert un droit qui n’a pas dépassé le délai de déchéance.</p>
<p>Tout allocataire de l’Assurance-chômage est donc <strong>nécessairement inscrit à France Travail.</strong></p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Indemnisables non inscrits
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les données administratives peuvent présenter quelques erreurs. Une partie relativement négligeable des allocataires de l’Assurance-chômage n’ont pas d’inscription en cours dans les données de l’inscription (Fichier Historique Statistique, FHS). Ces données sont dites aberrantes car aucun allocataire ne peut percevoir d’allocation chômage sans avoir une inscription en cours à France Travail, un défaut d’actualisation entraînant directement l’arrêt du versement.</p>
</div>
</div>
<p>Une désinscription de France Travail entraîne donc une sortie de l’Assurance-chômage.</p>
</section>
<section id="ouverture-de-droit" class="level1">
<h1>Ouverture de droit 🟢</h1>
<p>Un droit à l’Assurance-chômage est identifié dans le FNA par le couple <code>id_midas</code>, <code>KROD3</code> (PJC) ou <code>KROD1</code> (ODD, DAL).</p>
<p>La table ODD du FNA ne contient pas les dates d’ouverture de droit.</p>
<p>Elle contient la <strong>date du premier versement d’allocation sur le droit</strong> (<code>KDPOD</code>) qui ne correspond pas à la date d’ouverture de droit (ou entrée à l’Assurance-chômage). Les allocataires commencent presque systématiquement par une période indemnisable (couverte par l’Assurance-chômage) non indemnisée : la période de différé d’indemnisation (voir la fiche dédiée - à venir). Certains allocataires peuvent retrouver un emploi et se désinscrire pendant cette période de différé d’indemnisation et ne jamais être indemnisé sur leur droit. Dans ce cas, la date de premier jour indemnisé n’est pas renseignée.</p>
<p>La <strong>date d’ouverture de droit doit être recalculée à partir de la table PJC du FNA</strong>. La premiere PJC sur le droit (couple <code>id_midas</code>, <code>KROD3</code>), celle dont la date de début <code>KDDPJ</code> est minimale pour ce couple identifiant, correspond à l’ouverture de droit. Cette première PJC est la grande majorité du temps non payée, non consommée (<code>KCPJC = 3</code>), avec une allocation journalière <code>KQBPJP</code> nulle car elle correspond à une période indemnisable non indemnisée de <strong>différé d’indemnisation.</strong></p>
<p>Pour calculer la date d’ouverture de droit et comptabiliser l’ensemble des ouvertures de droit un mois donné :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>ouvertures_droit_mois <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KROD3, KDDPJ) <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">date_ouv_droit =</span> <span class="fu">min</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date_ouv_droit <span class="sc">&gt;=</span> mois_debut <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;=</span> mois_fin) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fait-générateur" class="level1">
<h1>Fait générateur</h1>
<p>Le fait générateur de l’ouverture de droit est la fin du contrat donnant droit à une prise en charge par l’Assurance-chômage. Ce contrat ouvrant le droit est disponible dans la table <strong>CDT du FNA</strong>.</p>
<p><img src="../images/schema_FNA.PNG" class="img-fluid"></p>
<p>Le <strong>fait générateur</strong> est un concept crucial car c’est cette date qui détermine généralement l<strong>a réglementation dont l’allocataire dépend :</strong> lorsqu’une réforme de l’indemnisation est mise en place, un droit est concerné si le fait générateur, c’est-à-dire la date de fin du contrat ouvrant le droit, a lieu après la date indiquée pour l’entrée en vigueur de la nouvelle règle.</p>
<p>Pour associer une ouverture de droit à son fait générateur, il existe deux méthodes possibles :</p>
<ul>
<li><p>appariement direct entre la table ODD et la table CDT en utilisant le couple clef d’appariement <code>id_midas</code>, <code>KCCT</code> (CDT) et son équivalent <code>KCCT1</code> (ODD)</p></li>
<li><p><strong>appariement en deux temps par la table DAL :</strong></p>
<ul>
<li><p>associer un droit d’ODD avec la demande d’allocation de DAL correspondante via le couple clef d’appariement <code>id_midas</code>, <code>KROD1</code> en conservant uniquement les demandes d’allocation donnant lieu à une ouverture de droit (<code>KCNDDA = 1</code>) ou à une reprise de droit (<code>KCNDDA = 3</code>)</p></li>
<li><p>associer une demande d’allocation acceptée au fait générateur à l’aide du couple <code>id_midas</code>, <code>KCDA</code> (DAL) et son homologue <code>KCDA1</code> (CDT).</p></li>
</ul></li>
</ul>
<p>La méthode recommandée est <strong>l’appariement en deux temps par la table DAL</strong>, pour les raisons suivantes <strong>:</strong></p>
<ul>
<li><p>une partie des contrats de travail faits générateurs est manquante dans les données adminsitratives</p></li>
<li><p>quelques faits générateurs supplémentaires ne peuvent pas être associés à un droit par la méthode d’appariement direct entre ODD et CDT : pour certains droits, la variable nécessaire à l’appariement <code>KCCT1</code> est non renseignée dans la table ODD</p></li>
<li><p>la méthode d’appariement via DAL est la méthode qui permet de récupérer le maximum de faits générateurs.</p></li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Entrée dans le FNA par PJC ou ODD 💡
</div>
</div>
<div class="callout-body-container callout-body">
<p>Il est conseillé <strong>de partir des tables PJC ou ODD</strong> pour repérer des allocataires indemnisables ou indemnisés d’un champ, plutôt que de commencer le repérage par la table CDT du fait générateur.</p>
<p>Partir de la table CDT peut paraître naturel puisque la date de fin de contrat fait générateur conditionne la soumisison à une réglementation d’Assurance-chômage, mais le fait que certains faits générateurs soit manquants peut conduire à sous estimer le nombre de personnes du champ visé.</p>
<p>Un <strong>proxi de la date du fait générateur peut être la date d’ouverture de droit</strong>. Ce proxi n’est pas parfait : le demandeur d’emploi dispose d’un an pour s’inscrire à France Travail à l’issue de sa fin de contrat. En réalité, l’inscription a souvent lieu peu après la fin de contrat, et la demande d’allocation est déposée très rapidement également.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>droits_faits_generateurs <span class="ot">&lt;-</span> ODD <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(DAL, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KNCDDA <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> KCNDDA <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, KCDA) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">KCDA1 =</span> KCDA) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(CDT, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KCDA1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, KDFPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="durée-potentielle-dindemnisation" class="level1">
<h1>Durée potentielle d’indemnisation 🟢</h1>
<p>Un droit se caractérise par une durée potentielle d’indemnisation. La durée potentielle d’indemnisation dépend de la réglementation dont dépend le droit.</p>
<p>La variable <code>KPJDXP</code>de la table <strong>ODD</strong> renseigne la durée potentielle d’indemnisation, mais elle présente des <strong>valeurs aberrantes</strong>. Elle doit être redressée avant d’être utilisée.</p>
<p>La durée potentielle d’indemnisation dépend de l’âge de l’allocataire au moment de la fin de contrat fait générateur de l’ouverture de droit. La durée potentielle d’indemnisation donnée par <code>KPJDXP</code> dépasse parfois la borne maximale légale pour la classe d’âge de l’allocataire. Il faut donc borner cette durée maximale par la durée légale connue.</p>
<p>L’âge à la fin du contrat de travail peut être calculé à l’aide de la date de naissance disponible dans la table DE du FHS. Pour les faits générateurs manquants, il est possible de lui substituer l’âge à l’ouverture de droit.</p>
<p>Par exemple, en distinguant les droits ouverts avant le 1er février 2023 (date d’entrée en vigueur de la contracyclicité) et les droits ouverts ensuite :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>droit_datnais <span class="ot">&lt;-</span> DE <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, datnais) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(ODD, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, datnais)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>date_ouvertures_droit <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KROD3, KDDPJ) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">date_ouv_droit =</span> <span class="fu">min</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">KROD1 =</span> KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(droit_datnais, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD1"</span>))</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>fait_generateur <span class="ot">&lt;-</span> DAL <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(date_ouvertures_droit, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KNCDDA <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> KCNDDA <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, KCDA, datnais) <span class="sc">%&gt;%</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">KCDA1 =</span> KCDA) <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(CDT, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KCDA1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, KDFPE, datnais) <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDFPE =</span> <span class="fu">as.Date</span>(KDFPE),</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">datnais =</span> <span class="fu">as.Date</span>(datnais),</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_fin_ctt =</span> <span class="fu">case_when</span>(<span class="sc">!</span>(<span class="fu">is.na</span>(KDFPE)) <span class="sc">~</span> KDFPE <span class="sc">-</span> datnais,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>                                 (<span class="fu">is.na</span>(KDFPE)) <span class="sc">~</span> date_ouv_droit <span class="sc">-</span> datnais))</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>duree_max_redressee <span class="ot">&lt;-</span> ODD <span class="sc">%&gt;%</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(fait_generateur, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duree_max =</span> <span class="fu">case_when</span>(age_fin_ctt <span class="sc">&lt;</span> <span class="dv">53</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">730</span>, <span class="dv">730</span>, KPJDXP),</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">53</span> <span class="sc">&amp;</span> age_fin_ctt <span class="sc">&lt;</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>)))<span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">913</span>, <span class="dv">913</span>, KPJDXP),</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">1095</span>, <span class="dv">1095</span>, KPJDXP),</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&lt;</span> <span class="dv">53</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">548</span>, <span class="dv">548</span>, KPJDXP),</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">53</span> <span class="sc">&amp;</span> age_fin_ctt <span class="sc">&lt;</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>)))<span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">685</span>, <span class="dv">685</span>, KPJDXP),</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">822</span>, <span class="dv">822</span>, KPJDXP)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ensemble-des-indemnisables" class="level1">
<h1>Ensemble des indemnisables 🔵</h1>
<p>Une personne indemnisable dispose d’une PJC en cours dans la table <strong>PJC</strong> du FNA, qu’elle soit payée et consommée (<code>KCPJC = 1</code>), non payée et consommée (<code>KCPJC = 2</code>), ou non payée et non consommée (<code>KCPJC = 3</code>).</p>
<section id="en-fin-de-mois" class="level2">
<h2 class="anchored" data-anchor-id="en-fin-de-mois">En fin de mois 🔵</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>indemnisable_fm <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KCPJC, KDDPJ, KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDDPJ <span class="sc">&lt;=</span> mois_fin <span class="sc">&amp;</span> KDFPJ <span class="sc">&gt;=</span> mois_fin) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tout-le-mois" class="level2">
<h2 class="anchored" data-anchor-id="tout-le-mois">Tout le mois</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>mois_duree  <span class="ot">=</span> mois_fin <span class="sc">-</span> mois_debut <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>indemnisable_tm <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KCPJC, KDDPJ, KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ_trunc =</span> <span class="fu">if_else</span>(KDDPJ <span class="sc">&lt;</span> mois_debut, mois_debut, KDDPJ),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">KDFPJ_truc =</span> <span class="fu">if_else</span>(KDFPJ <span class="sc">&gt;</span> mois_fin, mois_fin, KDFPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDDPJ <span class="sc">&lt;=</span> mois_fin <span class="sc">&amp;</span> KDFPJ <span class="sc">&gt;=</span> mois_debut) <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duree_PJC_trunc =</span> KDFPJ_trunc <span class="sc">-</span> KDDPJ_trunc) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas) <span class="sc">%&gt;%</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">duree_indemnisable =</span> <span class="fu">sum</span>(duree_PJC_trunc)) <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(duree_indemnisable <span class="sc">==</span> mois_duree) <span class="sc">%&gt;%</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="au-cours-du-mois" class="level2">
<h2 class="anchored" data-anchor-id="au-cours-du-mois">Au cours du mois</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>indemnisable_cm <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KCPJC, KDDPJ, KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDDPJ <span class="sc">&lt;=</span> mois_fin <span class="sc">&amp;</span> KDFPJ <span class="sc">&gt;=</span> mois_debut) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cas-de-lactivité-réduite" class="level2">
<h2 class="anchored" data-anchor-id="cas-de-lactivité-réduite">Cas de l’activité réduite</h2>
<p>Un allocataire peut cumuler une partie de ses allocations avec le revenu d’une activité réduite, dans la limite de son SJR mensualisé. Ainsi, une partie seulement de son allocation mensuelle lui est versée, et la partie non versée et non consommée du fait de l’activité réduite est reportée.</p>
<p>Dans les données de l’indemnisation (PJC du FNA), cette réglementation est renseignée de la façon suivante :</p>
<ul>
<li><p>le montant d’allocation versé est reseigné sous forme de jours consommés et payés d’allocation. L’indemnisation est fondée sur le concept d’un montant journalier d’allocation versé pendant un nombre de jours d’au maximum la durée potentielle d’indemnisation. Lorsqu’une partie seulement de l’allocation est versée sur le mois, ce montant mensuel est traduit en nombre de jours indemnisés au montant d’allocation journalière sur le mois. Ces jours payés consommés forment une PJC unique payée consommée (<code>KCPJC = 1</code>) en début de mois.</p></li>
<li><p>le montant non versé du fait de l’activité réduite correspond au nombre de jours non indemnisés au montant d’allocation journalière du reste du mois. Pour ces jours restants sur le mois, une unique PJC non payée non consommée (<code>KCPJC = 3</code>) sur la deuxième partie du mois, qui commence le jour suivant la fin de la PJC payée consommée. L’allocataire est alors dit indemnisable.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exemple
</div>
</div>
<div class="callout-body-container callout-body">
<p>Un allocataire dispose d’un SJR de 70€. Son allocation journalière correspond à 57% de son SJR, soit 39,9€. Il débute une activité au début du mois m avec un salaire de 230€. Pour un euro d’activité réduite gagné, il perd uniquement 70 centimes d’allocation. Son allocation mensuelle de 1197€ diminue donc de 161€ (0,7 x 230€). Ces 161€ représentent 4 jours indemnisés au montant d’allocation journalière de 39,9€. Dans les données, au mois m, cet allocataire aura :</p>
<ul>
<li><p>une PJC payée, consommée du 1er au 26ème jour du mois m ;</p></li>
<li><p>une PJC non payée non consommée du 27ème jour au 30ème jour du mois m.</p></li>
</ul>
<p>Ces 4 jours non payés non consommés sont reportés et pourront être consommés plus tard.</p>
<p>Son revenu total augmente donc au mois m : 1266€ au lieu de 1197€.</p>
</div>
</div>
<p>Ces allocataires comptent parmi les indemnisables en fin de mois, mais parmi les indemnisés au cours du mois.</p>
</section>
</section>
<section id="ensemble-des-indemnisés" class="level1">
<h1>Ensemble des indemnisés 🔵</h1>
<section id="en-fin-de-mois-1" class="level2">
<h2 class="anchored" data-anchor-id="en-fin-de-mois-1">En fin de mois 🔵</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>indemnisable_fm <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KCPJC, KDDPJ, KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDDPJ <span class="sc">&lt;=</span> mois_fin <span class="sc">&amp;</span> KDFPJ <span class="sc">&gt;=</span> mois_fin <span class="sc">&amp;</span> KCPJC <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tout-le-mois-1" class="level2">
<h2 class="anchored" data-anchor-id="tout-le-mois-1">Tout le mois</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>indemnisable_tm <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KCPJC, KDDPJ, KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDDPJ <span class="sc">&lt;=</span> mois_fin <span class="sc">&amp;</span> KDFPJ <span class="sc">&gt;=</span> mois_debut) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PJC_payee =</span> <span class="fu">if_else</span>(KCPJC <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas) <span class="sc">%&gt;%</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nb_PJC =</span> <span class="fu">n</span>(),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">nb_PJC_payee =</span> <span class="fu">sum</span>(PJC_payee)) <span class="sc">%&gt;%</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nb_PJC <span class="sc">==</span> nb_PJC_payee) <span class="sc">%&gt;%</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="au-cours-du-mois-1" class="level2">
<h2 class="anchored" data-anchor-id="au-cours-du-mois-1">Au cours du mois</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>indemnisable_cm <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KCPJC, KDDPJ, KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDDPJ <span class="sc">&lt;=</span> mois_fin <span class="sc">&amp;</span> KDFPJ <span class="sc">&gt;=</span> mois_debut <span class="sc">&amp;</span> KCPJC <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="distinction-par-régime" class="level1">
<h1>Distinction par régime 🔵</h1>
<p><a href="../Fiches/Allocations_regimes.html">La fiche dédiée sur les allocations et régimes d’indemnisation</a> associe chaque code allocation détaillé des variables <code>KCAAJ</code> de la table ODD et <code>KCALF</code>de la table PJC à l’allocaiton agrégée et au régime d’indemnisation correspondant. Un exemple de programme R correspondant est disponible ci-dessous.</p>
<p>SUITE A VENIR</p>
<section id="régimes-particuliers" class="level2">
<h2 class="anchored" data-anchor-id="régimes-particuliers">Régimes particuliers</h2>
<p>Les régimes particuliers dépendant d’annexes à la convention d’Assurance-chômage sont donnés par la variable <code>KCRD</code> de la table ODD. Les exclusions de champ classiques concernent souvent le régime des intermittents du spectacle, qui correspondent aux annexes VII et X (<code>KCRD = 28</code> et <code>KCRD = 29</code>).</p>
</section>
</section>
<section id="consommation-de-droit" class="level1">
<h1>Consommation de droit 🟢</h1>
<p>Pour calculer le nombre de jours consommés dans le droit, il faut sommer les <strong>périodes consommées de ce droit dans la table PJC.</strong></p>
<p>Les périodes consommées sont :</p>
<ul>
<li><p>les périodes “consommées et payées” (<code>KCPJC = 1</code>)</p></li>
<li><p>les périodes consommées non payées (<code>KCPJC = 2</code>)</p></li>
<li><p>les périodes consommées et payées au titre des aides (<code>KCPJC = 4</code>) : elles sont inexistantes sur période récente.</p></li>
</ul>
<p>Par exemple, voici le programme pour calculer la consommation de droit d’un ensemble d’allocataires ouvrant un droit au cours de ce mois.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>ouvertures_droit_mois <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KROD3, KDDPJ) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">date_ouv_droit =</span> <span class="fu">min</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date_ouv_droit <span class="sc">&gt;=</span> mois_debut <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;=</span> mois_fin) </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>conso_droit <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KCPJC <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> KCPJC <span class="sc">==</span> <span class="dv">2</span> <span class="sc">|</span> KCPJC <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ),</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">KDFPJ =</span> <span class="fu">as.Date</span>(KDFPJ),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">duree_PJC =</span> KDFPJ <span class="sc">-</span> KDDPJ <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(ouvertures_droit_mois, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD3"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">conso_droit_obs =</span> <span class="fu">sum</span>(duree_PJC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">conso_droit =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(conso_droit_obs, <span class="dv">0</span>, conso_droit_obs)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Droit ouvert non consommé
</div>
</div>
<div class="callout-body-container callout-body">
<p>Un droit peut avoir été ouvert sans qu’aucun jour n’ait jamais été consommé. C’est le cas des allocataires qui se désinscrivent pendant leur période de différé d’indemnisation.</p>
</div>
</div>
</section>
<section id="reprises-de-droit" class="level1">
<h1>Reprises de droit 🟢</h1>
<p>Un droit ouvert à l’Assurance-chômage peut être <strong>repris suite à une désinscription.</strong></p>
<p>Comme représenté sur le schéma ci-dessous, un allocataire peut retrouver un contrat et se désinscrire de France Travail, ce qui met fin à son indemnisation automatiquement. Cet allocataire peut par exemple parvenir à la fin d’un CDD de 2 mois et s’inscrire à nouveau à France Travail pour la perte involontaire de ce contrat de travail. Une nouvelle demande d’allocation est déposée et peut donner lieu à la reprise du droit précédemment ouvert à la suite de la perte du premier contrat, un CDI de 2 ans.</p>
<p>Cette reprise est possible à deux conditions :</p>
<ul>
<li><p>si le droit précédemment ouvert n’a <strong>pas encore été entièrement consommé</strong></p></li>
<li><p>si le droit n’a <strong>pas atteint son délai de déchéance</strong> : trois ans allongé de la durée potentielle d’indemnisation initiale. Il existe des cas particuliers permettant d’allonger ce délai.</p></li>
</ul>
<p><strong>Illustration d’un cas-type de reprise de droit</strong></p>
<p><img src="../images/reprise_droit.png" class="img-fluid"></p>
<p>Dans les données, le repérage des reprises de droit se fait comme suit : lorsque deux PJC sur le même droit (même couple identifiant <code>id_midas</code>, <code>KROD3</code>) sont espacées d’au moins un jour, la nouvelle PJC correspond à une reprise de droit.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>reprise_droit <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(id_midas, KROD3, KDDPJ) <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ecart =</span> KDDPJ <span class="sc">-</span> <span class="fu">lag</span>(KDFPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ecart <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> KDDPJ <span class="sc">&gt;=</span> mois_debut <span class="sc">&amp;</span> KDDPJ <span class="sc">&lt;=</span> mois_fin) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="droit-doption" class="level2">
<h2 class="anchored" data-anchor-id="droit-doption">Droit d’option</h2>
<p>Dans le cas où une personne aurait assez travaillé suite à sa désincription pour ouvrir un nouveau droit, tandis que son ancien droit n’est pas déchu, par exemple dans la situation représentée ci-dessous :</p>
<p><strong>Illustration d’un cas-typ de droit d’option</strong></p>
<p><img src="../images/droit_option.png" class="img-fluid"></p>
<p>Il existe une possibilité <strong>d’opter sous conditions pour le droit nouvellement ouvert du fait de cette nouvelle période travaillée</strong>. Les conditions sont détaillées <a href="https://www.unedic.org/la-reglementation/fiches-thematiques/droit-doption">dans cet article de l’UNEDIC.</a></p>
<p>Le nouveau droit ouvert avec droit d’option corrrespond alors à un nouveau couple identifiant <code>id_midas</code>, <code>KROD3</code> . L’ouverture d’un nouveau droit lié à un droit d’option correspond à une demande d’allocation dans DAL dont le motif de décision est Ouverture de droit suite à “Exercice du Droit d’Option” (AC 2014) (<code>KCNDDA = 12</code> ) ou Ouverture de droit suite à “Exercice du Droit d’Option” autre qu’apprentis (Avenants AC 2014) (<code>KCNDDA = 13</code> ).</p>
</section>
</section>
<section id="fins-de-droit" class="level1">
<h1>Fins de droit 🟢</h1>
<p>Une fin de droit a lieu lorsque l’allocataire consomme une durée égale à la durée potentielle d’indemnisation de son droit.</p>
<p>Pour repérer une fin de droit, il suffit de vérifier que la durée consommé du droit à la date de fin de PJC est égale à la durée potentielle d’indemnisation redressée.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>mois_debut <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>mois_fin <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-31"</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcul de la duree maximale redressee</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>droit_datnais <span class="ot">&lt;-</span> DE <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, datnais) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(ODD, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, datnais)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>date_ouvertures_droit <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KROD3, KDDPJ) <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">date_ouv_droit =</span> <span class="fu">min</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">KROD1 =</span> KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(droit_datnais, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD1"</span>))</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>fait_generateur <span class="ot">&lt;-</span> DAL <span class="sc">%&gt;%</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(date_ouvertures_droit, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KNCDDA <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> KCNDDA <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, KCDA, datnais) <span class="sc">%&gt;%</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">KCDA1 =</span> KCDA) <span class="sc">%&gt;%</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(CDT, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KCDA1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1, KDFPE, datnais) <span class="sc">%&gt;%</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDFPE =</span> <span class="fu">as.Date</span>(KDFPE),</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">datnais =</span> <span class="fu">as.Date</span>(datnais),</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_fin_ctt =</span> <span class="fu">case_when</span>(<span class="sc">!</span>(<span class="fu">is.na</span>(KDFPE)) <span class="sc">~</span> KDFPE <span class="sc">-</span> datnais,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>                                 (<span class="fu">is.na</span>(KDFPE)) <span class="sc">~</span> date_ouv_droit <span class="sc">-</span> datnais))</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>duree_max_redressee <span class="ot">&lt;-</span> ODD <span class="sc">%&gt;%</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(fait_generateur, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD1"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">duree_max =</span> <span class="fu">case_when</span>(age_fin_ctt <span class="sc">&lt;</span> <span class="dv">53</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">730</span>, <span class="dv">730</span>, KPJDXP),</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">53</span> <span class="sc">&amp;</span> age_fin_ctt <span class="sc">&lt;</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>)))<span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">913</span>, <span class="dv">913</span>, KPJDXP),</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">1095</span>, <span class="dv">1095</span>, KPJDXP),</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&lt;</span> <span class="dv">53</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">548</span>, <span class="dv">548</span>, KPJDXP),</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">53</span> <span class="sc">&amp;</span> age_fin_ctt <span class="sc">&lt;</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>)))<span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">685</span>, <span class="dv">685</span>, KPJDXP),</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>                               age_fin_ctt <span class="sc">&gt;=</span> <span class="dv">55</span> <span class="sc">&amp;</span> (KDFPE <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>) <span class="sc">|</span> (<span class="fu">is.na</span>(KDFPE) <span class="sc">&amp;</span> date_ouv_droit <span class="sc">&lt;=</span> <span class="fu">as.Date</span>(<span class="st">"2023-02-01"</span>))) <span class="sc">~</span> <span class="fu">ifelse</span>(KPJDXP <span class="sc">&gt;</span> <span class="dv">822</span>, <span class="dv">822</span>, KPJDXP)))</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Repérage des fins de PJC un mois donné</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>fin_pjc <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDFPJ =</span> <span class="fu">as.Date</span>(KDFPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDFPJ <span class="sc">&lt;=</span> mois_fin <span class="sc">&amp;</span> KDFPJ <span class="sc">&gt;=</span> mois_deb) <span class="sc">%&gt;%</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDFPJ_borne <span class="sc">==</span> <span class="fu">max</span>(KDFPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() </span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcul des consommations de droit à  la fin de PJC repérer</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>conso_droit <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KCPJC <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> KCPJC <span class="sc">==</span> <span class="dv">2</span> <span class="sc">|</span> KCPJC <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ),</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>         <span class="at">KDFPJ =</span> <span class="fu">as.Date</span>(KDFPJ),</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">duree_PJC =</span> KDFPJ <span class="sc">-</span> KDDPJ <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(fin_pjc, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD3"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDFPJ <span class="sc">&lt;=</span> KDFPJ_borne)</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">conso_droit_obs =</span> <span class="fu">sum</span>(duree_PJC, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">conso_droit =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(conso_droit_obs, <span class="dv">0</span>, conso_droit_obs))) </span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparaison à la durée potentielle d'indemnisation</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a>fin_droit <span class="ot">&lt;-</span> conso_droit <span class="sc">%&gt;%</span></span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(duree_max_redressee, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD3"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(conso_droit <span class="sc">==</span> duree_max) <span class="sc">%&gt;%</span></span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="suivies-dun-rechargement" class="level2">
<h2 class="anchored" data-anchor-id="suivies-dun-rechargement">Suivies d’un rechargement 🟢</h2>
<p>Le repérage des rechargements suite à une fin de droit est permis par la table DAL. Au sujet des rechargements, voir l’article de l’UNEDIC <a href="https://www.unedic.org/la-reglementation/fiches-thematiques/droits-rechargeables">à ce lien</a>.</p>
<p>Un rechargement correspond à un nouveau couple identifiant <code>id_midas</code>, <code>KROD3</code> . Si la fin de droit est suivie de l’ouverture d’un nouveau droit associé à une demande d’allocation de type rechargement (<code>KCDAL = 26</code>) dont la décision est “ouverture de droit suite à rechargement (AC 2014)” (<code>KCNDDA = 10</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>date_fin_droit <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KROD3, KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KDFPJ <span class="sc">==</span> <span class="fu">max</span>(KDFPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">date_fin_droit =</span> KDFPJ) <span class="sc">%&gt;%</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(fin_droit, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD3"</span>))</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>nouveau_droit <span class="ot">&lt;-</span> PJC <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KROD3, KDDPJ) <span class="sc">%&gt;%</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">KDDPJ =</span> <span class="fu">as.Date</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id_midas, KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">date_ouv_droit =</span> <span class="fu">min</span>(KDDPJ)) <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">KROD3_rechargement =</span> KROD3) <span class="sc">%&gt;%</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(date_fin_droit, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date_ouv_droit <span class="sc">&gt;=</span> date_fin_droit) <span class="sc">%&gt;%</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ecart =</span> date_fin_droit <span class="sc">-</span> date_ouv_droit) <span class="sc">%&gt;%</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ecart <span class="sc">&lt;=</span> <span class="dv">30</span>) </span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>rechargement <span class="ot">&lt;-</span> DAL <span class="sc">%&gt;%</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id_midas, KROD1, KCDAL, KCNDDA) <span class="sc">%&gt;%</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">KROD3_rechargement =</span> KROD1) <span class="sc">%&gt;%</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(nouveau_droit, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"id_midas"</span>, <span class="st">"KROD3_rechargement"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(KCDAL <span class="sc">==</span> <span class="dv">26</span> <span class="sc">&amp;</span> KCNDDA <span class="sc">==</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id_midas, KROD1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="glossaire-de-lindemnisation" class="level1">
<h1>Glossaire de l’indemnisation</h1>
<p>Ce glossaire est tiré du <a href="https://dares.travail-emploi.gouv.fr/publication/indemnisation-des-demandeurs-demploi-en-2022#:~:text=L'allocation%20journali%C3%A8re%20est%20calcul%C3%A9e,%C3%A0%20partir%20de%20juillet%202022.">bilan indemnisation 2022</a> publié par la Dares.</p>
<ul>
<li><p><strong>Entree à l’Assurance-chômage :</strong> une entrée à l’Assurance-chômage a lieu lorsqu’un demandeur d’emploi devient indemnisable, à la suite d’une perte d’emploi (ouverture de droit), ou d’une interruption (pour maladie par exemple) ou d’une ouverture de nouveaux droits.</p></li>
<li><p><strong>Durée maximale d’indemnisation :</strong> la durée maximale d’indemnisation, ou durée du droit, correspond au nombre de jours d’indemnisation auquel donnent droit les périodes d’affiliation qui ont été liquidées.</p></li>
<li><p><strong>Indemnisable à l’Assurance-chômage :</strong> une personne est dite “indemnisable” ou “couverte par une allocation” ou “a des droits ouverts à cette allocation”, si elle a déposé une demande d’allocation qui a été acceptée.</p></li>
<li><p><strong>Indemnisable en fin de mois :</strong> indemnisable le dernier jour de ce mois.</p></li>
<li><p><strong>Indemnisabilité continue :</strong> une personne est continûment indemnisable un mois donné lorsque qu’elle est indemnisable tous les jours de ce mois, même si elle a changé d’allocation au cours du mois.</p></li>
<li><p><strong>Indemnisé :</strong> une personne est indemnisée par une allocation un mois donné si elle perçoit effectivement une allocation ce mois-ci. Dans certaines situations (activité réduite, différé ou délai d’attente, sanction), une personne peut être indemnisable un mois donné mais non indemnisée.</p></li>
<li><p><strong>Période à Justification Constante (PJC) :</strong> c’est une période pendant laquelle le montant versé est constant. Elle est donc définie par une date de début, une date de fin et un montant fixe d’allocation journalière versée. Une période à justification constante peut correspondre à un montant d’allocation journalière de 0 : l’allocataire est dit indemnisable non indemnisé. Il est pris en charge par l’Assurance-chômage mais aucune allocation ne lui est versée pour plusieurs motifs : atteinte du plafond de cumul d’activité réduite, prise en charge temporaire par la Sécurité Sociale, période de différé d’indemnisation…</p></li>
<li><p><strong>Durée consommée de droit :</strong> la durée consommée sur le droit est définie comme le cumul des jours déjà indemnisés au titre de ce droit à une date donnée. Elle ne peut être supérieure à la durée maximale d’indemnisation.</p></li>
<li><p><strong>Sortie de l’Assurance-chômage :</strong> une sortie de l’Assurance-chômage correspond à une interruption d’un droit d’au moins un jour ou à une fin de droits. Lorsqu’une personne cesse de percevoir une allocation, mais que le droit reste ouvert (pratique d’une activité réduite par exemple), elle ne sort pas de l’Assurance-chômage.</p></li>
</ul>
</section>
<section id="cibles" class="level1">
<h1>Cibles</h1>
<p>Pour vérifier la méthodologie utilisée en programmation pour reproduire des indicateurs statistiques usuels à partir des données de l’indemnisation, il est possible d’utiliser les sources suivantes :</p>
<ul>
<li><p>le bilan annuel sur l’indemnisation des demandeurs d’emploi publié par la Dares : <a href="https://dares.travail-emploi.gouv.fr/publication/indemnisation-des-demandeurs-demploi-en-2022#:~:text=L'allocation%20journali%C3%A8re%20est%20calcul%C3%A9e,%C3%A0%20partir%20de%20juillet%202022.">l’indemnisation des demandeurs d’emploi en 2022</a>. Il contient les indicateurs présentés ici repérés par un 🔵</p></li>
<li><p>le tableau de suivi de l’Assurance chômage mis à jour mensuellement par l’UNEDIC : <a href="https://data.unedic.org/explore/dataset/evolution_indicateurs_cles_ac/table/?disjunctive.region&amp;disjunctive.departement&amp;sort=region">indicateurs de suivi de l’Assurance-chômage par département</a>. Il contient les indicateurs présentés ici repérés par un 🟢</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/DocumentationMiDAS\.github\.io\/Documentation_MiDAS\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>